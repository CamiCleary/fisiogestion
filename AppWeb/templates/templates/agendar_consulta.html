<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agendar Consulta - Paciente</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Inter', sans-serif; }
        body { display: flex; background-color: #f0faf9; min-height: 100vh; color: #333; }
        .sidebar { width: 220px; background-color: #eaf8f6; padding: 20px; display: flex; flex-direction: column; justify-content: space-between; position: fixed; height: 100vh; }
        .logo { text-align: center; margin-bottom: 30px; }
        .logo img { width: 120px; }
        .nav { display: flex; flex-direction: column; gap: 15px; }
        .nav a { text-decoration: none; color: #000; padding: 10px; border-radius: 5px; transition: background-color 0.3s; }
        .nav a:hover, .nav a.active { background-color: #d2f4f0; }
        .paciente { font-size: 14px; margin-top: 30px; }
        .main { flex-grow: 1; margin-left: 220px; padding: 40px; }
        .header { margin-bottom: 30px; }
        .header h1 { color: #333; margin-bottom: 10px; }
        .breadcrumb { font-size: 14px; color: #888; }

        .form-container { background: white; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); padding: 30px; }
        .form-section { margin-bottom: 30px; }
        .section-title { font-size: 18px; font-weight: 600; color: #333; margin-bottom: 20px; padding-bottom: 10px; border-bottom: 2px solid #e9ecef; }

        .form-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; }
        .form-group { display: flex; flex-direction: column; }
        .form-label { font-size: 14px; font-weight: 500; color: #333; margin-bottom: 8px; }
        .form-input, .form-select, .form-textarea { padding: 12px; border: 1px solid #ddd; border-radius: 6px; font-size: 14px; transition: border-color 0.3s; }
        .form-input:focus, .form-select:focus, .form-textarea:focus { outline: none; border-color: #00b89f; }
        .form-textarea { resize: vertical; min-height: 80px; }

        .therapist-selection { margin-bottom: 30px; }
        .therapist-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 15px; }
        .therapist-card { border: 2px solid #e9ecef; border-radius: 10px; padding: 20px; cursor: pointer; transition: all 0.3s; }
        .therapist-card:hover { border-color: #00b89f; box-shadow: 0 4px 12px rgba(0,184,159,0.1); }
        .therapist-card.selected { border-color: #00b89f; background: #f0fdf9; }
        .therapist-header { display: flex; align-items: center; gap: 15px; margin-bottom: 15px; }
        .therapist-avatar { width: 50px; height: 50px; border-radius: 50%; background: linear-gradient(135deg, #00b89f, #009688); display: flex; align-items: center; justify-content: center; color: white; font-weight: 600; font-size: 18px; }
        .therapist-info h3 { font-size: 16px; color: #333; margin-bottom: 5px; }
        .therapist-info p { font-size: 12px; color: #666; }
        .therapist-details { font-size: 13px; color: #555; margin-bottom: 10px; }
        .therapist-rating { display: flex; align-items: center; gap: 5px; font-size: 12px; color: #666; }
        .stars { color: #ffc107; }

        .schedule-section { margin-bottom: 30px; }
        .calendar-container { display: grid; grid-template-columns: 1fr 300px; gap: 30px; }
        .calendar { border: 1px solid #e9ecef; border-radius: 10px; padding: 20px; }
        .calendar-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        .calendar-title { font-size: 16px; font-weight: 600; color: #333; }
        .calendar-nav { display: flex; gap: 10px; }
        .nav-btn { background: #f8f9fa; border: 1px solid #e9ecef; border-radius: 5px; padding: 8px 12px; cursor: pointer; font-size: 14px; }
        .nav-btn:hover { background: #e9ecef; }

        .calendar-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 5px; }
        .calendar-day { padding: 10px; text-align: center; border-radius: 5px; cursor: pointer; font-size: 14px; transition: all 0.2s; }
        .calendar-day:hover { background: #f0fdf9; }
        .calendar-day.available { background: #e8f7f4; color: #00b89f; font-weight: 500; }
        .calendar-day.selected { background: #00b89f; color: white; }
        .calendar-day.disabled { color: #ccc; cursor: not-allowed; }

        .time-slots { border: 1px solid #e9ecef; border-radius: 10px; padding: 20px; }
        .time-slots h3 { font-size: 16px; font-weight: 600; color: #333; margin-bottom: 15px; }
        .time-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; }
        .time-slot { padding: 12px; border: 1px solid #e9ecef; border-radius: 6px; text-align: center; cursor: pointer; font-size: 14px; transition: all 0.2s; }
        .time-slot:hover { border-color: #00b89f; background: #f0fdf9; }
        .time-slot.selected { background: #00b89f; color: white; border-color: #00b89f; }
        .time-slot.unavailable { background: #f8f9fa; color: #999; cursor: not-allowed; }

        .summary-section { background: #f8f9fa; border-radius: 10px; padding: 20px; margin-bottom: 30px; }
        .summary-title { font-size: 16px; font-weight: 600; color: #333; margin-bottom: 15px; }
        .summary-item { display: flex; justify-content: space-between; margin-bottom: 10px; font-size: 14px; }
        .summary-label { color: #666; }
        .summary-value { font-weight: 500; color: #333; }
        .summary-total { border-top: 2px solid #e9ecef; padding-top: 15px; margin-top: 15px; }
        .summary-total .summary-value { font-size: 16px; font-weight: 600; color: #00b89f; }

        .form-actions { display: flex; gap: 15px; justify-content: flex-end; }
        .btn { padding: 12px 24px; border: none; border-radius: 6px; font-size: 14px; font-weight: 500; cursor: pointer; text-decoration: none; transition: all 0.3s; }
        .btn-primary { background: #00b89f; color: white; }
        .btn-primary:hover { background: #009688; }
        .btn-secondary { background: #6c757d; color: white; }
        .btn-secondary:hover { background: #5a6268; }
        .btn-outline { background: transparent; color: #00b89f; border: 1px solid #00b89f; }
        .btn-outline:hover { background: #00b89f; color: white; }

        .alert { padding: 15px; border-radius: 6px; margin-bottom: 20px; font-size: 14px; }
        .alert-success { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .alert-info { background: #cce7ff; color: #004085; border: 1px solid #bee5eb; }

        @media (max-width: 768px) { .sidebar { display: none; } .main { margin-left: 0; padding: 20px; } .calendar-container { grid-template-columns: 1fr; } .form-grid { grid-template-columns: 1fr; } .therapist-grid { grid-template-columns: 1fr; } .time-grid { grid-template-columns: 1fr; } }
    </style>
</head>
<body>
    <div class="sidebar">
        <div>
            <div class="logo">
                <img src="../logo.png" alt="Fisiogestión">
            </div>
            <div class="nav">
                <a href="dashboard_paciente.html">Mi Portal</a>
                <a href="mis_consultas.html">Mis Consultas</a>
                <a href="agendar_consulta.html" class="active">Agendar Cita</a>
                <a href="mis_pagos.html">Mis Pagos</a>
                <a href="telemedicina_paciente.html">Telemedicina</a>
                <a href="mi_material.html">Mi Material</a>
            </div>
        </div>
        <div class="paciente">
            <p><strong>María González</strong></p>
            <p>Paciente</p>
            <p style="font-size: 12px; color: #666;">ID: P-2024-001</p>
        </div>
    </div>

    <div class="main">
        <div class="header">
            <h1>Agendar Nueva Consulta</h1>
            <div class="breadcrumb">Mi Portal > Agendar Cita</div>
        </div>

        <div class="form-container">
            <form id="appointmentForm">
                <div class="form-section">
                    <div class="section-title">Información de la Consulta</div>
                    <div class="form-grid">
                        <div class="form-group">
                            <label class="form-label">Tipo de Consulta</label>
                            <select class="form-select" id="consultationType" required>
                                <option value="">Seleccionar tipo</option>
                                <option value="primera-vez">Primera Vez</option>
                                <option value="seguimiento">Seguimiento</option>
                                <option value="control">Control</option>
                                <option value="urgente">Urgente</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Modalidad</label>
                            <select class="form-select" id="modality" required>
                                <option value="">Seleccionar modalidad</option>
                                <option value="presencial">Presencial</option>
                                <option value="telemedicina">Telemedicina</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Especialidad</label>
                            <select class="form-select" id="specialty" required>
                                <option value="">Seleccionar especialidad</option>
                                <option value="traumatologia">Traumatología</option>
                                <option value="neurologia">Neurología</option>
                                <option value="pediatria">Pediatría</option>
                                <option value="geriatria">Geriatría</option>
                                <option value="deportiva">Medicina Deportiva</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Motivo de la Consulta</label>
                        <textarea class="form-textarea" id="reason" placeholder="Describe brevemente el motivo de tu consulta..." required></textarea>
                    </div>
                </div>

                <div class="form-section therapist-selection">
                    <div class="section-title">Seleccionar Fisioterapeuta</div>
                    <div class="therapist-grid">
                        <div class="therapist-card" data-therapist="martinez">
                            <div class="therapist-header">
                                <div class="therapist-avatar">DM</div>
                                <div class="therapist-info">
                                    <h3>Dr. Carlos Martínez</h3>
                                    <p>Especialista en Traumatología</p>
                                </div>
                            </div>
                            <div class="therapist-details">15 años de experiencia • Rehabilitación post-operatoria</div>
                            <div class="therapist-rating">
                                <span class="stars">★★★★★</span>
                                <span>4.9 (127 reseñas)</span>
                            </div>
                        </div>
                        <div class="therapist-card" data-therapist="lopez">
                            <div class="therapist-header">
                                <div class="therapist-avatar">AL</div>
                                <div class="therapist-info">
                                    <h3>Dra. Ana López</h3>
                                    <p>Especialista en Neurología</p>
                                </div>
                            </div>
                            <div class="therapist-details">12 años de experiencia • Rehabilitación neurológica</div>
                            <div class="therapist-rating">
                                <span class="stars">★★★★★</span>
                                <span>4.8 (89 reseñas)</span>
                            </div>
                        </div>
                        <div class="therapist-card" data-therapist="garcia">
                            <div class="therapist-header">
                                <div class="therapist-avatar">PG</div>
                                <div class="therapist-info">
                                    <h3>Dr. Pedro García</h3>
                                    <p>Especialista en Medicina Deportiva</p>
                                </div>
                            </div>
                            <div class="therapist-details">10 años de experiencia • Lesiones deportivas</div>
                            <div class="therapist-rating">
                                <span class="stars">★★★★☆</span>
                                <span>4.7 (156 reseñas)</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="form-section schedule-section">
                    <div class="section-title">Seleccionar Fecha y Hora</div>
                    <div class="calendar-container">
                        <div class="calendar">
                            <div class="calendar-header">
                                <div class="calendar-title">Noviembre 2024</div>
                                <div class="calendar-nav">
                                    <button type="button" class="nav-btn" onclick="previousMonth()">‹</button>
                                    <button type="button" class="nav-btn" onclick="nextMonth()">›</button>
                                </div>
                            </div>
                            <div class="calendar-grid">
                                <div class="calendar-day disabled">28</div>
                                <div class="calendar-day disabled">29</div>
                                <div class="calendar-day disabled">30</div>
                                <div class="calendar-day disabled">31</div>
                                <div class="calendar-day available" onclick="selectDate('2024-11-01')">1</div>
                                <div class="calendar-day disabled">2</div>
                                <div class="calendar-day disabled">3</div>
                                <div class="calendar-day available" onclick="selectDate('2024-11-04')">4</div>
                                <div class="calendar-day available" onclick="selectDate('2024-11-05')">5</div>
                                <div class="calendar-day available" onclick="selectDate('2024-11-06')">6</div>
                                <div class="calendar-day available" onclick="selectDate('2024-11-07')">7</div>
                                <div class="calendar-day available" onclick="selectDate('2024-11-08')">8</div>
                                <div class="calendar-day disabled">9</div>
                                <div class="calendar-day disabled">10</div>
                                <div class="calendar-day available" onclick="selectDate('2024-11-11')">11</div>
                                <div class="calendar-day available" onclick="selectDate('2024-11-12')">12</div>
                                <div class="calendar-day available" onclick="selectDate('2024-11-13')">13</div>
                                <div class="calendar-day available" onclick="selectDate('2024-11-14')">14</div>
                                <div class="calendar-day available" onclick="selectDate('2024-11-15')">15</div>
                                <div class="calendar-day disabled">16</div>
                                <div class="calendar-day disabled">17</div>
                            </div>
                        </div>
                        <div class="time-slots">
                            <h3>Horarios Disponibles</h3>
                            <div class="time-grid" id="timeSlots">
                                <div class="time-slot unavailable">Selecciona una fecha</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="form-section">
                    <div class="section-title">Resumen de la Cita</div>
                    <div class="summary-section">
                        <div class="summary-title">Detalles de tu consulta</div>
                        <div class="summary-item">
                            <span class="summary-label">Fisioterapeuta:</span>
                            <span class="summary-value" id="summaryTherapist">No seleccionado</span>
                        </div>
                        <div class="summary-item">
                            <span class="summary-label">Fecha:</span>
                            <span class="summary-value" id="summaryDate">No seleccionada</span>
                        </div>
                        <div class="summary-item">
                            <span class="summary-label">Hora:</span>
                            <span class="summary-value" id="summaryTime">No seleccionada</span>
                        </div>
                        <div class="summary-item">
                            <span class="summary-label">Tipo:</span>
                            <span class="summary-value" id="summaryType">No seleccionado</span>
                        </div>
                        <div class="summary-item">
                            <span class="summary-label">Modalidad:</span>
                            <span class="summary-value" id="summaryModality">No seleccionada</span>
                        </div>
                        <div class="summary-item summary-total">
                            <span class="summary-label">Costo de la consulta:</span>
                            <span class="summary-value">$80.000</span>
                        </div>
                    </div>
                </div>

                <div class="form-actions">
                    <a href="mis_consultas.html" class="btn btn-outline">Cancelar</a>
                    <button type="submit" class="btn btn-primary">Confirmar Cita</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        let selectedTherapist = null;
        let selectedDate = null;
        let selectedTime = null;

        // Selección de fisioterapeuta
        document.querySelectorAll('.therapist-card').forEach(card => {
            card.addEventListener('click', function() {
                document.querySelectorAll('.therapist-card').forEach(c => c.classList.remove('selected'));
                this.classList.add('selected');
                selectedTherapist = this.dataset.therapist;
                updateSummary();
                loadAvailableSlots();
            });
        });

        // Selección de fecha
        function selectDate(date) {
            document.querySelectorAll('.calendar-day').forEach(day => day.classList.remove('selected'));
            event.target.classList.add('selected');
            selectedDate = date;
            updateSummary();
            loadTimeSlots();
        }

        // Cargar horarios disponibles
        function loadTimeSlots() {
            const timeSlotsContainer = document.getElementById('timeSlots');
            const availableSlots = ['09:00', '10:00', '11:00', '14:00', '15:00', '16:00'];
            const unavailableSlots = ['10:00', '15:00'];
            
            timeSlotsContainer.innerHTML = '';
            
            availableSlots.forEach(slot => {
                const timeSlot = document.createElement('div');
                timeSlot.className = `time-slot ${unavailableSlots.includes(slot) ? 'unavailable' : ''}`;
                timeSlot.textContent = slot;
                
                if (!unavailableSlots.includes(slot)) {
                    timeSlot.addEventListener('click', function() {
                        document.querySelectorAll('.time-slot').forEach(s => s.classList.remove('selected'));
                        this.classList.add('selected');
                        selectedTime = slot;
                        updateSummary();
                    });
                }
                
                timeSlotsContainer.appendChild(timeSlot);
            });
        }

        // Actualizar resumen
        function updateSummary() {
            const therapistNames = {
                'martinez': 'Dr. Carlos Martínez',
                'lopez': 'Dra. Ana López',
                'garcia': 'Dr. Pedro García'
            };

            document.getElementById('summaryTherapist').textContent = 
                selectedTherapist ? therapistNames[selectedTherapist] : 'No seleccionado';
            
            document.getElementById('summaryDate').textContent = 
                selectedDate ? new Date(selectedDate).toLocaleDateString('es-ES', {
                    weekday: 'long',
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric'
                }) : 'No seleccionada';
            
            document.getElementById('summaryTime').textContent = 
                selectedTime ? selectedTime : 'No seleccionada';
            
            document.getElementById('summaryType').textContent = 
                document.getElementById('consultationType').value || 'No seleccionado';
            
            document.getElementById('summaryModality').textContent = 
                document.getElementById('modality').value || 'No seleccionada';
        }

        // Envío del formulario
        document.getElementById('appointmentForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            if (!selectedTherapist || !selectedDate || !selectedTime) {
                alert('Por favor, completa todos los campos requeridos.');
                return;
            }
            
            alert('¡Cita agendada exitosamente!\nRecibirás una confirmación por email.');
            window.location.href = 'mis_consultas.html';
        });

        // Actualizar resumen cuando cambien los selects
        document.getElementById('consultationType').addEventListener('change', updateSummary);
        document.getElementById('modality').addEventListener('change', updateSummary);

        // Navegación del calendario (simulación)
        function previousMonth() {
            alert('Navegando al mes anterior...');
        }

        function nextMonth() {
            alert('Navegando al mes siguiente...');
        }
    </script>
</body>
</html>
