<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Telemedicina - Paciente</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Inter', sans-serif; }
        body { display: flex; background-color: #f0faf9; min-height: 100vh; color: #333; }
        .sidebar { width: 220px; background-color: #eaf8f6; padding: 20px; display: flex; flex-direction: column; justify-content: space-between; position: fixed; height: 100vh; }
        .logo { text-align: center; margin-bottom: 30px; }
        .logo img { width: 120px; }
        .nav { display: flex; flex-direction: column; gap: 15px; }
        .nav a { text-decoration: none; color: #000; padding: 10px; border-radius: 5px; transition: background-color 0.3s; }
        .nav a:hover, .nav a.active { background-color: #d2f4f0; }
        .paciente { font-size: 14px; margin-top: 30px; }
        .main { flex-grow: 1; margin-left: 220px; padding: 40px; }
        .header { margin-bottom: 30px; }
        .header h1 { color: #333; margin-bottom: 10px; }
        .breadcrumb { font-size: 14px; color: #888; }

        .telemedicina-grid { display: grid; grid-template-columns: 2fr 1fr; gap: 30px; margin-bottom: 30px; }
        .main-section { background: white; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); padding: 25px; }
        .side-section { display: flex; flex-direction: column; gap: 20px; }
        .section-card { background: white; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); padding: 20px; }
        .section-title { font-size: 18px; font-weight: 600; margin-bottom: 20px; color: #333; border-bottom: 2px solid #f0f0f0; padding-bottom: 10px; }

        .active-session { background: linear-gradient(135deg, #00b89f, #009688); color: white; text-align: center; padding: 40px; border-radius: 10px; margin-bottom: 20px; }
        .session-status { font-size: 14px; opacity: 0.9; margin-bottom: 10px; }
        .session-title { font-size: 24px; font-weight: 600; margin-bottom: 15px; }
        .session-info { font-size: 16px; margin-bottom: 20px; }
        .join-button { background: white; color: #00b89f; padding: 12px 30px; border: none; border-radius: 25px; font-size: 16px; font-weight: 600; cursor: pointer; transition: all 0.3s; }
        .join-button:hover { background: #f0f0f0; transform: translateY(-2px); }

        .no-session { text-align: center; padding: 40px; color: #666; }
        .no-session-icon { font-size: 48px; margin-bottom: 15px; }
        .no-session h3 { font-size: 20px; margin-bottom: 10px; }
        .no-session p { margin-bottom: 20px; }

        .upcoming-sessions { }
        .session-item { display: flex; align-items: center; gap: 15px; padding: 15px; border: 1px solid #e9ecef; border-radius: 8px; margin-bottom: 10px; transition: all 0.3s; }
        .session-item:hover { border-color: #00b89f; background: #f8fdfc; }
        .session-date { background: #00b89f; color: white; padding: 8px; border-radius: 6px; text-align: center; min-width: 60px; }
        .session-day { font-size: 18px; font-weight: 600; }
        .session-month { font-size: 10px; text-transform: uppercase; }
        .session-details h4 { color: #333; margin-bottom: 4px; }
        .session-details p { font-size: 12px; color: #666; }
        .session-time { margin-left: auto; font-weight: 600; color: #00b89f; text-align: right; }

        .device-test { }
        .test-section { margin-bottom: 20px; }
        .test-item { display: flex; justify-content: space-between; align-items: center; padding: 10px 0; border-bottom: 1px solid #f0f0f0; }
        .test-item:last-child { border-bottom: none; }
        .test-label { font-weight: 500; }
        .test-status { display: flex; align-items: center; gap: 8px; font-size: 12px; }
        .status-ok { color: #388e3c; }
        .status-error { color: #d32f2f; }
        .test-button { background: #00b89f; color: white; padding: 6px 12px; border: none; border-radius: 4px; font-size: 12px; cursor: pointer; }

        .session-history { }
        .history-item { display: flex; justify-content: space-between; align-items: center; padding: 12px 0; border-bottom: 1px solid #f0f0f0; }
        .history-item:last-child { border-bottom: none; }
        .history-info h4 { font-size: 14px; color: #333; margin-bottom: 2px; }
        .history-info p { font-size: 12px; color: #666; }
        .history-duration { font-size: 12px; color: #00b89f; font-weight: 600; }

        .video-container { background: #000; border-radius: 10px; aspect-ratio: 16/9; display: flex; align-items: center; justify-content: center; color: white; margin-bottom: 20px; position: relative; overflow: hidden; }
        .video-placeholder { text-align: center; }
        .video-placeholder-icon { font-size: 48px; margin-bottom: 10px; opacity: 0.5; }
        .video-controls { position: absolute; bottom: 20px; left: 50%; transform: translateX(-50%); display: flex; gap: 15px; }
        .control-button { background: rgba(255,255,255,0.2); border: none; color: white; padding: 12px; border-radius: 50%; cursor: pointer; transition: background 0.3s; }
        .control-button:hover { background: rgba(255,255,255,0.3); }
        .control-button.active { background: #00b89f; }

        .requirements { background: #fff3cd; border: 1px solid #ffeaa7; border-radius: 8px; padding: 15px; margin-bottom: 20px; }
        .requirements h4 { color: #856404; margin-bottom: 10px; }
        .requirements ul { margin-left: 20px; }
        .requirements li { color: #856404; font-size: 14px; margin-bottom: 5px; }

        .btn-primary { background: #00b89f; color: white; padding: 12px 24px; border: none; border-radius: 6px; font-size: 14px; font-weight: 500; cursor: pointer; text-decoration: none; display: inline-block; text-align: center; }
        .btn-primary:hover { background: #009688; }
        .btn-secondary { background: white; color: #666; padding: 10px 20px; border: 1px solid #ddd; border-radius: 6px; font-size: 14px; cursor: pointer; text-decoration: none; }

        @media (max-width: 768px) { 
            .sidebar { display: none; } 
            .main { margin-left: 0; padding: 20px; } 
            .telemedicina-grid { grid-template-columns: 1fr; gap: 20px; }
        }
    </style>
</head>
<body>
    <div class="sidebar">
        <div>
            <div class="logo">
                <img src="../logo.png" alt="Fisiogestión">
            </div>
            <div class="nav">
                <a href="dashboard_paciente.html">Mi Portal</a>
                <a href="mis_consultas.html">Mis Consultas</a>
                <a href="agendar_consulta.html">Agendar Cita</a>
                <a href="mis_pagos.html">Mis Pagos</a>
                <a href="telemedicina_paciente.html" class="active">Telemedicina</a>
                <a href="mi_material.html">Mi Material</a>
            </div>
        </div>
        <div class="paciente">
            <p><strong>María González</strong></p>
            <p>Paciente</p>
            <p style="font-size: 12px; color: #666;">ID: P-2024-001</p>
        </div>
    </div>

    <div class="main">
        <div class="header">
            <h1>Telemedicina</h1>
            <div class="breadcrumb">Mi Portal > Telemedicina</div>
        </div>

        <div class="telemedicina-grid">
            <div class="main-section">
                <!-- Sesión Activa o Video Placeholder -->
                <div id="activeSessionCard" class="active-session" style="display: none;">
                    <div class="session-status">🔄 Sesión en progreso</div>
                    <div class="session-title">Consulta con Dr. Martínez</div>
                    <div class="session-info">Duración: 25 minutos | Modalidad: Seguimiento</div>
                    <button class="join-button" onclick="joinSession()">Continuar Sesión</button>
                </div>

                <div id="noSessionCard" class="no-session">
                    <div class="no-session-icon">📹</div>
                    <h3>No tienes sesiones activas</h3>
                    <p>Cuando tengas una cita de telemedicina programada, aparecerá aquí para que puedas unirte.</p>
                    <a href="agendar_consulta.html" class="btn-primary">Agendar Cita Virtual</a>
                </div>

                <!-- Vista previa de video -->
                <div class="video-container" id="videoPreview" style="display: none;">
                    <div class="video-placeholder">
                        <div class="video-placeholder-icon">📹</div>
                        <p>Vista previa de tu cámara</p>
                    </div>
                    <div class="video-controls">
                        <button class="control-button" id="muteButton" onclick="toggleMute()">🎤</button>
                        <button class="control-button" id="videoButton" onclick="toggleVideo()">📹</button>
                        <button class="control-button" onclick="endCall()">📞</button>
                    </div>
                </div>

                <!-- Requisitos técnicos -->
                <div class="requirements">
                    <h4>📋 Requisitos para la videollamada</h4>
                    <ul>
                        <li>Conexión a internet estable (mínimo 1 Mbps)</li>
                        <li>Cámara web y micrófono funcionales</li>
                        <li>Navegador actualizado (Chrome, Firefox, Safari)</li>
                        <li>Ambiente privado y bien iluminado</li>
                    </ul>
                </div>
            </div>

            <div class="side-section">
                <!-- Próximas sesiones -->
                <div class="section-card">
                    <h3 class="section-title">Próximas Sesiones</h3>
                    <div class="upcoming-sessions">
                        <div class="session-item">
                            <div class="session-date">
                                <div class="session-day">15</div>
                                <div class="session-month">NOV</div>
                            </div>
                            <div class="session-details">
                                <h4>Seguimiento</h4>
                                <p>Dr. Martínez - Fisioterapia</p>
                            </div>
                            <div class="session-time">
                                <div>10:00 AM</div>
                                <div style="font-size: 10px; font-weight: 400;">Virtual</div>
                            </div>
                        </div>
                        <div class="session-item">
                            <div class="session-date">
                                <div class="session-day">22</div>
                                <div class="session-month">NOV</div>
                            </div>
                            <div class="session-details">
                                <h4>Control</h4>
                                <p>Dr. Martínez - Fisioterapia</p>
                            </div>
                            <div class="session-time">
                                <div>2:30 PM</div>
                                <div style="font-size: 10px; font-weight: 400;">Virtual</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Test de dispositivos -->
                <div class="section-card">
                    <h3 class="section-title">Test de Dispositivos</h3>
                    <div class="device-test">
                        <div class="test-item">
                            <span class="test-label">Cámara</span>
                            <div class="test-status">
                                <span class="status-ok">✓ Funcionando</span>
                                <button class="test-button" onclick="testCamera()">Probar</button>
                            </div>
                        </div>
                        <div class="test-item">
                            <span class="test-label">Micrófono</span>
                            <div class="test-status">
                                <span class="status-ok">✓ Funcionando</span>
                                <button class="test-button" onclick="testMicrophone()">Probar</button>
                            </div>
                        </div>
                        <div class="test-item">
                            <span class="test-label">Altavoces</span>
                            <div class="test-status">
                                <span class="status-ok">✓ Funcionando</span>
                                <button class="test-button" onclick="testSpeakers()">Probar</button>
                            </div>
                        </div>
                        <div class="test-item">
                            <span class="test-label">Conexión</span>
                            <div class="test-status">
                                <span class="status-ok">✓ Buena (12 Mbps)</span>
                                <button class="test-button" onclick="testConnection()">Probar</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Historial de sesiones -->
                <div class="section-card">
                    <h3 class="section-title">Historial Reciente</h3>
                    <div class="session-history">
                        <div class="history-item">
                            <div class="history-info">
                                <h4>Seguimiento</h4>
                                <p>01 Nov 2024 - Dr. Martínez</p>
                            </div>
                            <div class="history-duration">45 min</div>
                        </div>
                        <div class="history-item">
                            <div class="history-info">
                                <h4>Primera Vez</h4>
                                <p>18 Oct 2024 - Dr. Martínez</p>
                            </div>
                            <div class="history-duration">60 min</div>
                        </div>
                        <div class="history-item">
                            <div class="history-info">
                                <h4>Control</h4>
                                <p>11 Oct 2024 - Dr. Martínez</p>
                            </div>
                            <div class="history-duration">30 min</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let isMuted = false;
        let isVideoOn = true;
        let isSessionActive = false;

        // Simular inicio de sesión
        function joinSession() {
            document.getElementById('activeSessionCard').style.display = 'none';
            document.getElementById('noSessionCard').style.display = 'none';
            document.getElementById('videoPreview').style.display = 'flex';
            isSessionActive = true;
            
            // Simular vista previa de cámara
            setTimeout(() => {
                document.querySelector('.video-placeholder').innerHTML = `
                    <div style="background: #333; width: 100%; height: 100%; display: flex; align-items: center; justify-content: center;">
                        <p>Tu video (simulado)</p>
                    </div>
                `;
            }, 1000);
        }

        function toggleMute() {
            isMuted = !isMuted;
            const button = document.getElementById('muteButton');
            button.textContent = isMuted ? '🔇' : '🎤';
            button.classList.toggle('active', isMuted);
            
            if (isMuted) {
                alert('Micrófono silenciado');
            } else {
                alert('Micrófono activado');
            }
        }

        function toggleVideo() {
            isVideoOn = !isVideoOn;
            const button = document.getElementById('videoButton');
            button.textContent = isVideoOn ? '📹' : '📷';
            button.classList.toggle('active', !isVideoOn);
            
            if (!isVideoOn) {
                document.querySelector('.video-placeholder').innerHTML = `
                    <div class="video-placeholder-icon">📷</div>
                    <p>Cámara desactivada</p>
                `;
            } else {
                document.querySelector('.video-placeholder').innerHTML = `
                    <div style="background: #333; width: 100%; height: 100%; display: flex; align-items: center; justify-content: center;">
                        <p>Tu video (simulado)</p>
                    </div>
                `;
            }
        }

        function endCall() {
            if (confirm('¿Estás seguro de que quieres finalizar la sesión?')) {
                document.getElementById('videoPreview').style.display = 'none';
                document.getElementById('noSessionCard').style.display = 'block';
                isSessionActive = false;
                alert('Sesión finalizada. Gracias por usar nuestro servicio de telemedicina.');
            }
        }

        // Funciones de test de dispositivos
        function testCamera() {
            alert('Probando cámara... ✓ Cámara funcionando correctamente');
        }

        function testMicrophone() {
            alert('Probando micrófono... ✓ Micrófono funcionando correctamente');
        }

        function testSpeakers() {
            alert('Reproduciendo sonido de prueba... ✓ Altavoces funcionando correctamente');
        }

        function testConnection() {
            alert('Probando velocidad de conexión... ✓ Conexión estable: 12 Mbps');
        }

        // Simular próxima sesión (para demo)
        setTimeout(() => {
            if (!isSessionActive) {
                document.getElementById('noSessionCard').style.display = 'none';
                document.getElementById('activeSessionCard').style.display = 'block';
            }
        }, 10000); // Mostrar sesión activa después de 10 segundos
    </script>
</body>
</html>
