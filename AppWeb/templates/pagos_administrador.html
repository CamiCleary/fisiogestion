{% load static %}
<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Pagos Administrador</title>

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="{% static 'css/tu-estilo.css' %}" />
</head>

<body>
    <div class="container my-5">
        <div style="margin-bottom: 5px;">
            <a href="{% url 'dashboard' %}"
                style="display: inline-flex; align-items: center; gap: 8px; background: #00b89f; color: #fff; text-decoration: none; padding: 10px 18px; border-radius: 6px; font-weight: 600;">
                <svg width="20" height="20" fill="none" viewBox="0 0 20 20">
                    <path d="M12.5 15l-5-5 5-5" stroke="#fff" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round" />
                </svg>
            </a>
        </div>
        <h2 class="mb-4 text-center text-primary">Listado de Pagos (Administrador)</h2>

        <div class="table-responsive">
            <table class="table table-striped table-bordered align-middle">
                <thead class="table-dark text-white">
                    <tr>
                        <th>Fecha</th>
                        <th>Paciente</th>
                        <th>Fisioterapeuta</th>
                        <th>MÃ©todo</th>
                        <th>Monto ($)</th>
                        <th>Factura</th>
                    </tr>
                </thead>
                <tbody>
                    {% for pago in pagos %}
                    <tr>
                        <td>{{ pago.fecha_pago|date:"Y-m-d H:i" }}</td>
                        <td>
                            {{ pago.consulta.paciente.nombre }}
                            {{ pago.consulta.paciente.apellido }}
                        </td>
                        <td>
                            {{ pago.consulta.fisioterapeuta.nombre }}
                            {{ pago.consulta.fisioterapeuta.apellido }}
                        </td>
                        <td>{{ pago.metodo_pago }}</td>
                        <td>${{ pago.monto }}</td>
                        <td data-label="Factura">
                            {% if pago.imagen_referencia %}
                            <a href="{% url 'ver_factura_pdf' pago.id %}" class="btn btn-outline-primary btn-sm"
                                target="_blank">
                                Ver Comprobante
                            </a>
                            {% else %}
                            <span class="text-muted">No disponible</span>
                            {% endif %}
                        </td>
                    </tr>
                    {% empty %}
                    <tr>
                        <td colspan="6" class="text-center">No hay pagos registrados.</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>